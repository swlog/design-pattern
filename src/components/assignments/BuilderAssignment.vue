<template>
  <div style="padding: 2rem; max-width: 900px; margin: 0 auto;">
    <h2 style="color: #2c3e50; margin-bottom: 1rem;">ğŸ—ï¸ Builder Pattern</h2>
    <p style="color: #7f8c8d; margin-bottom: 2rem; line-height: 1.6;">
      ë¹Œë” íŒ¨í„´ì€ ë³µì¡í•œ ê°ì²´ì˜ ìƒì„± ê³¼ì •ì„ ë‹¨ê³„ë³„ë¡œ ë¶„ë¦¬í•˜ì—¬ ë™ì¼í•œ ìƒì„± ì ˆì°¨ë¡œ ë‹¤ë¥¸ í‘œí˜„ì„ ë§Œë“¤ ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.
    </p>

    <div style="background: #f8f9fa; padding: 2rem; border-radius: 8px;">
      <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 1rem;">
        <div style="flex: 1; min-width: 200px;">
          <label
            style="font-weight: 600; color: #2c3e50; display: block; margin-bottom: 0.5rem;"
          >PC ì¢…ë¥˜:</label>
          <select
            v-model="pcType"
            style="padding: 0.5rem; border-radius: 4px; border: 1px solid #ddd; font-size: 1rem; width: 100%;"
          >
            <option value="gaming">ê²Œì´ë° PC</option>
            <option value="office">ì‚¬ë¬´ìš© PC</option>
          </select>
        </div>
        <button
          @click="runBuilder"
          style="padding: 0.75rem 1.5rem; background: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 1rem; align-self: flex-end;"
        >
          buildComputer(builder, "{{ pcType }}") ì‹¤í–‰
        </button>
      </div>

      <div v-if="logs.length > 0" style="margin-top: 2rem; background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <h3 style="color: #2c3e50; margin-bottom: 1rem;">ğŸ“‹ ì‹¤í–‰ ê²°ê³¼:</h3>
        <div
          v-for="(log, index) in logs"
          :key="index"
          style="margin: 1rem 0; padding: 1rem; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #3498db;"
        >
          <div style="display: flex; justify-content: space-between; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid #3498db;">
            <span style="font-weight: 600;">ì‹¤í–‰ #{{ index + 1 }}</span>
            <span style="padding: 0.25rem 0.75rem; background: #3498db; color: white; border-radius: 12px; font-size: 0.9rem;">
              {{ log.type === 'gaming' ? 'ê²Œì´ë° PC' : 'ì‚¬ë¬´ìš© PC' }}
            </span>
          </div>
          <div style="display: flex; flex-direction: column; gap: 0.5rem;">
            <div
              v-for="(msg, i) in log.messages"
              :key="i"
              style="padding: 0.75rem 1rem; background: white; border-radius: 4px; font-family: Consolas, Monaco, monospace; font-size: 0.95rem;"
            >
              ğŸ”§ {{ msg }}
            </div>
          </div>
          <div style="margin-top: 1rem; padding: 1rem; background: white; border-radius: 4px;">
            <pre style="margin: 0; font-family: Consolas, Monaco, monospace; font-size: 0.9rem; white-space: pre-wrap;">
{{ log.specs }}
            </pre>
          </div>
        </div>

        <div style="margin-top: 2rem; padding: 1.5rem; background: #e3f2fd; border-radius: 8px; border-left: 4px solid #3498db;">
          <h4 style="color: #2c3e50; margin-bottom: 0.5rem;">ğŸ’¡ íŒ¨í„´ ì„¤ëª…</h4>
          <p style="margin: 0.5rem 0; color: #555; line-height: 1.6;">
            <strong>Builder íŒ¨í„´</strong>ì€ ë³µì¡í•œ ê°ì²´ë¥¼ ë‹¨ê³„ì ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.
          </p>
          <ul style="margin: 1rem 0 0 1.5rem; color: #555;">
            <li style="margin: 0.5rem 0;"><code style="background: white; padding: 0.2rem 0.5rem; border-radius: 3px; color: #3498db;">Computer</code>: ìƒì„±ë  ë³µì¡í•œ ì œí’ˆ (Product)</li>
            <li style="margin: 0.5rem 0;"><code style="background: white; padding: 0.2rem 0.5rem; border-radius: 3px; color: #3498db;">GamingComputerBuilder</code>: ë‹¨ê³„ë³„ ìƒì„± ë©”ì„œë“œ ì œê³µ (Builder)</li>
            <li style="margin: 0.5rem 0;"><code style="background: white; padding: 0.2rem 0.5rem; border-radius: 3px; color: #3498db;">ComputerDirector</code>: ë¹Œë”ë¥¼ ì‚¬ìš©í•˜ëŠ” ìˆœì„œ ì •ì˜ (Director)</li>
            <li style="margin: 0.5rem 0;">ë©”ì„œë“œ ì²´ì´ë‹ìœ¼ë¡œ ì½ê¸° ì‰¬ìš´ ì½”ë“œ ì‘ì„±!</li>
          </ul>
          <div style="display: flex; align-items: center; justify-content: center; gap: 1rem; margin-top: 1.5rem; padding: 1rem; background: white; border-radius: 8px; flex-wrap: wrap;">
            <div style="padding: 0.75rem 1.5rem; background: #3498db; color: white; border-radius: 8px; font-weight: 600;">Director</div>
            <div style="font-size: 1.5rem; color: #3498db;">â†’</div>
            <div style="padding: 0.75rem 1.5rem; background: #3498db; color: white; border-radius: 8px; font-weight: 600;">Builder</div>
            <div style="font-size: 1.5rem; color: #3498db;">â†’</div>
            <div style="padding: 0.75rem 1.5rem; background: #3498db; color: white; border-radius: 8px; font-weight: 600;">Product</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref } from 'vue'

// ---------------------
// Builder Pattern Classes
// ---------------------
class Computer {
  cpu = ''
  ram = ''
  storage = ''
  gpu = ''
  powerSupply = ''

  getSpecs() {
    return `
ì»´í“¨í„° ì‚¬ì–‘:
- CPU: ${this.cpu || 'ë¯¸ì„¤ì •'}
- RAM: ${this.ram || 'ë¯¸ì„¤ì •'}
- ì €ì¥ì¥ì¹˜: ${this.storage || 'ë¯¸ì„¤ì •'}
- GPU: ${this.gpu || 'ë¯¸ì„¤ì •'}
- íŒŒì›Œ: ${this.powerSupply || 'ë¯¸ì„¤ì •'}
    `.trim()
  }
}

class GamingComputerBuilder {
  computer = new Computer()
  messages = []

  setCPU(cpu) { this.computer.cpu = cpu; this.messages.push(`CPU ì„¤ì •: ${cpu}`); return this }
  setRAM(ram) { this.computer.ram = ram; this.messages.push(`RAM ì„¤ì •: ${ram}`); return this }
  setStorage(storage) { this.computer.storage = storage; this.messages.push(`ì €ì¥ì¥ì¹˜ ì„¤ì •: ${storage}`); return this }
  setGPU(gpu) { this.computer.gpu = gpu; this.messages.push(`GPU ì„¤ì •: ${gpu}`); return this }
  setPowerSupply(power) { this.computer.powerSupply = power; this.messages.push(`íŒŒì›Œ ì„¤ì •: ${power}`); return this }

  build() { this.messages.push('ì»´í“¨í„° ì¡°ë¦½ ì™„ë£Œ!'); return this.computer }
}

class ComputerDirector {
  buildGamingPC(builder) {
    builder.messages.push('ğŸ® ê²Œì´ë° PC ì¡°ë¦½ ì‹œì‘...')
    return builder
      .setCPU('Intel i9-13900K')
      .setRAM('32GB DDR5')
      .setStorage('2TB NVMe SSD')
      .setGPU('NVIDIA RTX 4090')
      .setPowerSupply('850W 80+ Gold')
      .build()
  }

  buildOfficePC(builder) {
    builder.messages.push('ğŸ’¼ ì‚¬ë¬´ìš© PC ì¡°ë¦½ ì‹œì‘...')
    return builder
      .setCPU('Intel i5-13400')
      .setRAM('16GB DDR4')
      .setStorage('512GB SSD')
      .setPowerSupply('500W 80+ Bronze')
      .build()
  }
}

// ---------------------
// Vue Composition Logic
// ---------------------
const logs = ref([])
const pcType = ref('gaming')

function runBuilder() {
  const builder = new GamingComputerBuilder()
  const director = new ComputerDirector()

  let computer
  if (pcType.value === 'gaming') {
    computer = director.buildGamingPC(builder)
  } else {
    computer = director.buildOfficePC(builder)
  }

  logs.value.push({
    type: pcType.value,
    messages: builder.messages,
    specs: computer.getSpecs()
  })
}
</script>
